<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Test API Questions</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 2em; }
        textarea { width: 100%; height: 80px; }
        pre { background: #eee; padding: 1em; }
    </style>
</head>
<body>
    <h1>Test API /quiz/v0.1/questions/</h1>

    <h2>GET tutte le domande</h2>
    <button onclick="getQuestions()">GET /quiz/v0.1/questions/</button>
    <pre id="getResult"></pre>

    <h2>POST nuova domanda</h2>
    <textarea id="postData">
{
  "composer_id": 1,
  "audio": "prova.mp3",
  "image": "",
  "correct": "Brano Bello",
  "explanation": "Eh sì, è proprio quel brano lì"
}
    </textarea><br>
    <button onclick="postQuestion()">POST /quiz/v0.1/questions/</button>
    <pre id="postResult"></pre>

    <h2>PUT aggiorna domanda</h2>
    ID domanda: <input id="putId" type="number" value="1" min="1"><br>
    <textarea id="putData">
{
  "composer_id": 1,
  "audio": "aggiornato.mp3",
  "image": "",
  "correct": "Risposta aggiornata",
  "explanation": "Spiegazione aggiornata"
}
    </textarea><br>
    <button onclick="putQuestion()">PUT /quiz/v0.1/questions/{id}</button>
    <pre id="putResult"></pre>

    <h2>DELETE domanda</h2>
    ID domanda: <input id="deleteId" type="number" value="1" min="1">
    <button onclick="deleteQuestion()">DELETE /quiz/v0.1/questions/{id}</button>
    <pre id="deleteResult"></pre>

    <script>
        const base = "http://127.0.0.1:8000/quiz/v0.1/questions/";

        function getQuestions() {
            fetch(base)
                .then(r => r.json())
                .then(data => document.getElementById('getResult').textContent = JSON.stringify(data, null, 2))
                .catch(e => document.getElementById('getResult').textContent = e);
        }

        function postQuestion() {
            fetch(base, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: document.getElementById('postData').value
            })
            .then(r => r.json())
            .then(data => document.getElementById('postResult').textContent = JSON.stringify(data, null, 2))
            .catch(e => document.getElementById('postResult').textContent = e);
        }

        function putQuestion() {
            const id = document.getElementById('putId').value;
            fetch(base + id, {
                method: "PUT",
                headers: { "Content-Type": "application/json" },
                body: document.getElementById('putData').value
            })
            .then(r => r.json())
            .then(data => document.getElementById('putResult').textContent = JSON.stringify(data, null, 2))
            .catch(e => document.getElementById('putResult').textContent = e);
        }

        function deleteQuestion() {
            const id = document.getElementById('deleteId').value;
            fetch(base + id, {
                method: "DELETE"
            })
            .then(r => r.json())
            .then(data => document.getElementById('deleteResult').textContent = JSON.stringify(data, null, 2))
            .catch(e => document.getElementById('deleteResult').textContent = e);
        }
    </script>
</body>
</html>